# 1.Coredump

## 1.1 Coredump作用

- `Coredump`是程序异常时，保留的异常现场的寄存器数值等内存信息。
    
    - 首先使用`ulimit -a`查看设置
    - 找到`core file size (-c)`
    - 使用`ulimit -c unlimited`, 将`dump`文件大小设置为不受限制
    - `sudo vim /etc/sysctl.conf`, 在其中添加一句内容(`#`代表已被注释) 。`krenel.core_pattern = %e_core_%s_%t` ,
	    - `%`是占位符
	    - `%e:executable-name`
	    - `%s:signal`
	    - `%t:time` 
	    - 意思是以 文件名_信号_时间戳的格式生成coredump文件。
    - 然后使用`sudo sysctl -p`, 使得设置生效

## 1.2 coredump使用方式

- `coredump`的前提还是`-g`在编译时附带`gdb`调试信息。
- 运行可执行文件异常后，会在当前目录生成一个前面命名风格的文件。
- 使用`gdb 可执行文件名 coredump文件名` 进入调试状态。
    
    - `gdb`模式下 使用`backtrace` 查看栈帧情况(可简写为`bt`)
    - `frame` 查看n号堆帧的情况
    - `info args` 查看参数
    - `info locals` 查看局部变量
    - `info registers` 查看寄存器