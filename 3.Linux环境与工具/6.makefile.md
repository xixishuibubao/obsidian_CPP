## 1.语法格式

- `target : 依赖`

- `一个tab的间距 gcc 源文件 -c 目标.o [附加选项]`，`tab`是必要的，`makefile`间距严格。

	- ps. `target`是可以没有依赖或者命令

## 2.执行流程

1. 先检查依赖是否被修改。
	1. 被修改或者不存在就执行命令行，然后再链接依赖；
	2. 否则就直接链接使其变成`target`。

## 3.伪目标`.PHONY`

- 一般用来创建批量删除`.o`的命令

- `.PHONY`不会检查依赖，会直接执行他的命令行
	- `.PHONY: cmdname`,`cmdname`:要执行的命令

   ```makefile
	.PHONY: clean
	clean:
	rm -f main main.o
	rebuild: clean main
   ```


## 4.常见变量

- `val := 内容`,将某个变量修改为内容。
	- `CC := gcc`, 设置了一个名为`CC`的变量为`gcc`,使用`gcc`的时候`$(CC)`即可。

- 保留变量: 变量名 功能 默认含义

	- `AR` 打包库文件 `ar`
	- `AS` 汇编程序 `as`
	- `CC` C编译器 `cc`
	- `CPP` C预编译器 `$(CC) -E`
	- `CXX` C++编译器 `g++`
	- `RM` 删除 `rm –f`
	- `ARFLAGS` 库选项 无
	- `ASFLAGS` 汇编选项 无
	- `CFLAGS` C编译器选项 无
	- `CPPFLAGS` C预编译器选项 无
	- `CXXFLAGS` C++编译器选项 无


- 特殊变量: 不需要额外`$(VAL)使用。
	```makefile
	$@ 当前目标target文件名
	$^ 全部依赖 
	$< 第一个依赖
	$? 时间新于target的依赖文件
	```

- 函数(规则模式下`%`起到类似于通配符*的作用)
	```makefile
	Srcs := $(wildcard %.c) #查找当前目录下全部的.c文件赋值给Srcs 
	Objs := $(patsubst %.c，%.o,$(Srcs)) #参数列表Srcs中的全部.c替换为.o并返回
	```