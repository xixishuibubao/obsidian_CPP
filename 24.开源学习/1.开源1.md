### **一、高性能网络库：Muduo（陈硕）**

#### **项目定位**：Linux 下的 Reactor 模式 C++ 网络库（1.5万星）

#### **源码****解析资源**：

1. **《Linux** **多线程****服务器编程：使用 Muduo C++ 网络库》（书籍）**
    
    1. **核心内容**：
        
        - Reactor 模式实现（`EventLoop`/`Channel` 机制）
            
        - 线程池设计（`EventLoopThreadPool`）
            
        - 定时器队列（最小堆 + 红黑树混合结构）
            
        - 案例：聊天服务器、HTTP 服务器的架构演进
            
    2. **特色**：作者陈硕逐模块解析源码，揭示“如何用 5000 行代码实现高并发”。
        
    3. **学习路径**：配套 GitHub 仓库（[chenshuo/muduo](https://github.com/chenshuo/muduo)），每章对应源码注释。
        

  

2. **博客系列：Muduo** **源码****剖析（陈硕）**
    
    1. **链接**：[https://chenshuo.github.io/](https://chenshuo.github.io/)
        
    2. **重点**：
        
        - `EPollPoller` 的 LT/ET 模式选择（第 4 章）
            
        - `Buffer` 类的预分配 + 双指针优化（第 6 章）
            
        - 原子操作与 CAS 在 `AtomicInt64` 中的实现（第 8 章）
            

  

#### **架构核心**：

- **分层设计**：`muduo::net`（网络层）、`muduo::base`（基础库）
    
- **性能优化**：无锁队列（`BlockingQueue`）、内存池（`Poco` 风格）
    
- **设计哲学**：“够用即可”的极简主义（对比 ACE 框架的过度设计）
    

  

  

### **二、存储引擎：LevelDB（Google）**

#### **项目定位**：嵌入式 KV 存储（17.5万星，Redis/SQLite 借鉴）

#### **源码****解析资源**：

3. **《LevelDB** **源码****剖析》（极客时间专栏，吴咏炜）**
    
    1. **核心内容**：
        
        - LSM 树实现（`MemTable` → `Immutable MemTable` → SSTable）
            
        - 压缩算法（Snappy + 块缓存 `BlockCache`）
            
        - 版本管理（`VersionSet` + 红黑树）
            
    2. **特色**：逐文件解析（如 `db_impl.cc` 事务提交流程），对比 RocksDB 优化点。
        
    3. **学习路径**：配套 GitHub 注释版（[sanxiyn/leveldb](https://github.com/sanxiyn/leveldb)）。
        

  

4. **博客系列：LevelDB 设计与实现（美团技术团队）**
    
    1. **链接**：[https://tech.meituan.com/leveldb.html](https://tech.meituan.com/leveldb.html)
        
    2. **重点**：
        
        - SSTable 格式解析（索引块、数据块、Footer）
            
        - WAL（预写日志）的刷盘策略
            
        - 迭代器（`DBIterator`）的惰性加载设计
            

  

#### **架构核心**：

- **LSM** **树优化**：写放大 vs 读放大的平衡（`WriteBatch` 批量提交）
    
- **零拷贝****设计**：`ReadOptions` 直接映射 SSTable 到内存
    
- **错误处理**：`Status` 类的状态码与错误信息分离（借鉴 C++11 `expected`）
    

  

  

### **三、游戏引擎：****Cocos2d-x****（3D 版）**

#### **项目定位**：跨平台 2D/3D 游戏引擎（10.5万星，原神早期引擎）

#### **源码****解析资源**：

5. **《****Cocos2d-x** **3.x** **源码****彻底剖析》（书籍，郑泽宇）**
    
    1. **核心内容**：
        
        - 渲染流程（`Director` → `Renderer` → `GLView`）
            
        - 节点系统（`Node` 树与 `Component` 组件化）
            
        - 动画系统（`Action` 链式调用与插值算法）
            
    2. **特色**：结合《捕鱼达人》案例，解析引擎如何支撑百万级 DAU 游戏。
        
    3. **学习路径**：配套 GitHub 分支（[cocos2d/cocos2d-x](https://github.com/cocos2d/cocos2d-x)），标注关键模块。
        

  

6. **B站视频：****Cocos2d-x** **引擎架构（逐函数调试）**
    
    1. **链接**：[https://www.bilibili.com/video/BV1Wt411d7Fd](https://www.bilibili.com/video/BV1Wt411d7Fd)
        
    2. **重点**：
        
        - `Scene` 切换的内存管理（引用计数 `Ref` 机制）
            
        - `PhysicsBody` 与 Box2D 的集成设计
            
        - 资源加载（`AssetManager`）的异步加载队列
            

  

#### **架构核心**：

- **数据驱动**：`SpriteFrameCache` 纹理缓存与 `Plist` 文件解析
    
- **跨平台抽象**：`CCPlatformConfig.h` 屏蔽 iOS/Android 差异
    
- **性能优化**：`RenderTexture` 离屏渲染 + 批处理（`BatchNode`）
    

  

  

### **四、Web 框架：Wt（C++ 版 Django）**

#### **项目定位**：全栈 Web 框架（6.2万星，支持 C++17/20）

#### **源码解析资源**：

7. **《Wt 架构剖析与实战》（CSDN 专栏，野生架构师）**
    
    1. **核心内容**：
        
        - 请求处理（`WApplication` 生命周期）
            
        - 信号槽机制（`WSignal`/`WSlot` 的 C++ 实现）
            
        - 模板引擎（`WTemplate` 与 HTML 的绑定）
            
    2. **特色**：对比 Qt 的信号槽，解析 Wt 如何实现 Web 端的异步交互。
        
    3. **学习路径**：配套示例（[emweb/wt](https://github.com/emweb/wt)），分析 `examples/bookstore` 源码。
        

  

8. **博客：Wt 源码中的设计模式（工厂模式/策略模式）**
    
    1. **链接**：[https://segmentfault.com/a/1190000042357393](https://segmentfault.com/a/1190000042357393)
        
    2. **重点**：
        
        - `WContainerWidget` 的组合模式实现
            
        - `HttpMessage` 的建造者模式（`HttpMessageBuilder`）
            
        - 国际化（`WLocale`）的策略模式切换
            

  

#### **架构核心**：

- **状态保持**：`Session` 管理（Cookie + 服务器端存储）
    
- **前端抽象**：`WWidget` 树映射为 DOM 树（`DomElement` 类）
    
- **异步支持**：`WEventLoop` 集成 libevent，处理长连接（Comet 模式）
    

  

  

### **五、基础库：folly（Facebook）**

#### **项目定位**：C++ 基础库（26.5万星，含高性能数据结构）

#### **源码解析资源**：

9. **《 folly 源码深度解析》（掘金专栏，字节跳动工程师）**
    
    1. **核心内容**：
        
        - 无锁队列（`MPMCQueue`）的 CAS 实现
            
        - 内存管理（`FollyFutures` 与 `Promise`）
            
        - 字符串处理（`fbstring` 与 `IOBuf` 零拷贝）
            
    2. **特色**：结合抖音后端实践，解析 `AsyncSocket` 如何支撑百万 QPS。
        
    3. **学习路径**：GitHub 注释版（[facebook/folly](https://github.com/facebook/folly)），标注 `folly/synchronization` 目录。
        

  

10. **视频：folly 中的高性能设计（GCC 大会演讲）**
    
    1. **链接**：[https://www.bilibili.com/video/BV1gW411n7Xj](https://www.bilibili.com/video/BV1gW411n7Xj)
        
    2. **重点**：
        
        - `HHWheelTimer` 的时间轮算法（精度 vs 性能）
            
        - `SocketAddress` 的地址解析优化（缓存 DNS 结果）
            
        - `RangeMap` 的区间树实现（用于内存池管理）
            

  

#### **架构核心**：

- **零拷贝设计**：`IOBuf` 链表避免数据拷贝（对比 `std::vector`）
    
- **编译时优化**： `folly::ConstantTime` 编译期计算字符串哈希
    
- **平台无关**：`folly/portability` 目录屏蔽 Windows/Linux 差异
    

  

  

### **六、学习方法：如何高效剖析源码**

#### **1. 四步拆解法（以 Muduo 为例）**

- **第一步：绘制调用链**调试 `TCPServer` 启动流程，记录 `EventLoop::loop()` → `EPollPoller::poll()` 的调用栈。
    
- **第二步：分析数据结构**研究 `Channel` 类的 `revents`/`events` 位掩码设计，理解事件驱动核心。
    
- **第三步：对比设计模式**识别 Reactor 模式（`EventLoop` 为反应器）、策略模式（`Poller` 接口）。
    
- **第四步：性能测试验证**用 `ab` 压测示例服务器，对比单线程/多线程性能差异，验证源码中的线程池设计。
    

  

#### **2. 必备工具**

- **源码阅读**：VS Code + C++ 插件（跳转定义、调用树）
    
- **调试**：GDB + `catchsegv` 捕捉段错误（如 LevelDB 的 SSTable 解析）
    
- **性能分析**：Valgrind + Callgrind 分析 Cocos2d-x 的渲染耗时
    

  

  

### **七、总结：从源码到架构的学习清单**

|   |   |   |   |
|---|---|---|---|
|项目|核心设计思想|适合人群|解析深度|
|Muduo|Reactor 模式极简实现|网络编程进阶者|★★★★★|
|LevelDB|LSM 树的工程化落地|存储引擎开发者|★★★★☆|
|Cocos2d-x|组件化引擎架构|游戏开发工程师|★★★★☆|
|Wt|C++ 在 Web 领域的抽象|Web 框架设计者|★★★☆☆|
|folly|高性能基础库的设计哲学|基础架构开发者|★★★★☆|

  

**建议顺序**：先从 Muduo 掌握事件驱动架构（2 周），再深入 LevelDB 理解存储引擎（3 周），最后通过 Cocos2d-x 学习大型系统的组件化设计（4 周）。每个项目搭配对应书籍/专栏，边读源码边写注释，最终形成自己的架构设计知识库。