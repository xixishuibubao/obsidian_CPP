- 参考书目：modern Cmake for C++(github开源，陈晓伟 译)

# 1. 基础语法
## 1.1 cmake

### 1.1.1 构建与编译

```Bash
cmake -B dir_tree -S source_dir
# -B 指定构建目录，不存在则创建 -S指定源码目录
cmake --build dir_tree
#使用刚生成的cmake构建工程来编译，编译产物将放在 dir_tree目录
```
## 1.2 CmakeList.txt
### 1.2.1 常用模板
- ```cmake
		cmake_minimum_required(VERSION 3.17)  #指定Cmake最低版本
		project(gcx_muduo)  
		  
		# C++ 标准配置  
		set(CMAKE_CXX_STANDARD 20)  
  
		# 输出路径（自动创建）  
		set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)  
		set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)  
		file(MAKE_DIRECTORY ${LIBRARY_OUTPUT_PATH} ${EXECUTABLE_OUTPUT_PATH})  
		  
		# 编译选项  
		set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -g  -fPIC -pthread")  
		  
		# 配置你的库的公开头文件路径（使用者需要）
		set(PUBLIC_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/include)
		include_directories(${PUBLIC_INCLUDE_DIR})  # 你的代码能找到自己的头文件

		# 递归扫描：根目录 + src 所有子目录的 .c/.cpp  
		file(GLOB_RECURSE SRC_LIST  
		        CONFIGURE_DEPENDS  
		        ${PROJECT_SOURCE_DIR}/*.c  
		        ${PROJECT_SOURCE_DIR}/*.cpp  
		        ${PROJECT_SOURCE_DIR}/src/*.c  
		        ${PROJECT_SOURCE_DIR}/src/*.cpp  
		)  
		  
		# 排除无关目录（按需调整，保留你需要的目录）  
		# 禁止把cmake的目录包含进去，不然会导致main重定义，cmake的build文件夹下有自己的main文件
		list(FILTER SRC_LIST EXCLUDE REGEX "${PROJECT_SOURCE_DIR}/cmake-build-debug/.*")  
		list(FILTER SRC_LIST EXCLUDE REGEX "${PROJECT_SOURCE_DIR}/lib/.*")  
		list(FILTER SRC_LIST EXCLUDE REGEX "${PROJECT_SOURCE_DIR}/third_party/.*")  
		list(FILTER SRC_LIST EXCLUDE REGEX "${PROJECT_SOURCE_DIR}/examples/.*")  
		list(FILTER SRC_LIST EXCLUDE REGEX "${PROJECT_SOURCE_DIR}/tools/.*")  
		  
		# 编译可执行文件（确保所有扫描到的 .cpp 中仅有一个 main 函数）  
		add_executable(gcx_muduo ${SRC_LIST})  
		  
		# （可选）编译动态库（排除 main.cpp）  
		# add_library(gcx_muduo SHARED ${SRC_LIST})
	  ```